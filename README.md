## nodejs_chat-room

主要还是一个聊天的小玩意儿，照着 `socket.io` 官方文档一步步写下来，花了点时间去理解。

主要是事件的触发和数据的传递，当然还有很多其他功能等着去发现。

可以克隆下整个目录，之后进入下好的目录运行：`npm install`，安装运行依赖的模块。

下载完成之后运行 `npm run chat`。

浏览器打开：`127.0.0.1:3000/chat` 即可查看。

多人聊天需要把 `127.0.0.1` 改成本机 `ip`，实现局域网内的通信。

这是现在的基本样子，仿的 `Mac QQ` 界面：

![chat](assets/chat.png)

### 用到的技术点：

* `nodejs` 来搭建服务器，`express` 快速开发 `web` 平台

* `MySQL` 用来存储需要的值

* `socket.io` 用作及时聊天数据的传输

### 现有功能：

* 显示在线人数功能

* 抖一抖功能（并显示谁抖的）

* 通过手机重力感应的摇一摇

这个纯粹是为了好玩吧，但是也发现了几个问题：首先是手机进入页面的时候，也会显示上线人数，但是这个并不是希望的，所以还需要再看看 `socket.io` 的文档；其次是必须经过输入 `nickname` 后进入主聊天室才能去扫页面二维码，因为我把 `nickname` 放在了 `hash` 里，不能随便去改链接上的参数，不然就不准了，感觉有些鸡肋。

* 浏览器的通知功能（暂时只在 `chrome` 里测试过）

* 发送 `emoji` 功能

* 发送图片功能

### 目前还需要添加的功能：

* 保存最后一次聊天的 10 条消息记录

数据库用的是 `MySQL`，设计一张表来存储聊天记录，就这个还是没有想法。

### 写在结尾的话：

前端打算使用 `backbone` 来搭建，感觉数据交换还是挺频繁的，而且这个 `MVC` 框架很轻量，等 `MySQL` 用熟了，也可换成 `MongoDB` 加油努力～

以后有想到的新功能都会加上去并实现，代码还是要写的优雅。